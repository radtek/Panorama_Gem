<%
column_options =
  [
    {:caption=>"I",                :data=>proc{|rec| rec.inst_id},                      :title=>"RAC-Instance"},
    {:caption=>"Grant",            :data=>proc{|rec| rec.grant_level},                  :title=>"Grant-Level des Locks"},
    {:caption=>"Request",          :data=>proc{|rec| rec.request_level},                :title=>"Request-Level des Locks"},
    {:caption=>"Resource-Name",    :data=>proc{|rec| rec.resource_name1},               :title=>"Eindeutige Identifikation des Objektes, verbindet Blocker und Waiter"},
    {:caption=>"LT",               :data=>proc{|rec| rec.locktype},                     :title=>"Lock-Type", :data_title=>'#{lock_types(rec.locktype)}'},
    {:caption=>"Blocked",          :data=>proc{|rec| rec.blocked},                      :title=>"Session wird geblockt"},
    {:caption=>"Blocker",          :data=>proc{|rec| rec.blocker},                      :title=>"Session ist Blocker"},
    {:caption=>"SID",              :data=>proc{|rec| rec.sid},                          :title=>"Session-ID"},
    {:caption=>"SerialNo",         :data=>proc{|rec| rec.serialno},                     :title=>"Serial-No der Session"},
    {:caption=>"User",             :data=>proc{|rec| rec.username},                     :title=>"DB-Username"},
    {:caption=>"Process",          :data=>proc{|rec| rec.process},                      :title=>"Client-Prozess"},
    {:caption=>"Machine",          :data=>proc{|rec| rec.machine},                      :title=>"Client-Maschine"},
    {:caption=>"Terminal",         :data=>proc{|rec| rec.terminal},                     :title=>"Client-Terminal"},
    {:caption=>"Program",          :data=>proc{|rec| rec.program},                      :title=>"Client-Programm"},
    {:caption=>"SQL-ID",           :data=>proc{|rec| rec.sql_id},                       :title=>"Aktuell ausgeführtes SQL"},
    {:caption=>"Child",            :data=>proc{|rec| rec.sql_child_number},             :title=>"Child-Number des aktuell ausgeführtes SQL"},
    {:caption=>"Module",           :data=>proc{|rec| rec.module},                       :title=>"Module-Info"},
    {:caption=>"Action",           :data=>proc{|rec| rec.action},                       :title=>"Action-Info"},
    {:caption=>"Client-Info",      :data=>proc{|rec| rec.client_info},                  :title=>"Client-Info"},
    {:caption=>"Wait-Event",       :data=>proc{|rec| rec.event},                        :title=>"Aktueller Wait-Event"},
    {:caption=>"Status",           :data=>proc{|rec| rec.status},                       :title=>"Aktueller Session-Status"},
  ]

%>

<%= gen_slickgrid(@locks, column_options, {
        :caption=> "Dem RAC-Lock-Manager bekannte blockende Locks aus gv$GES_Blocking_Locks",
        :max_height => 450
}) %>
